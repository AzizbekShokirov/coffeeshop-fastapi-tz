# PostgreSQL Production Configuration
# Only settings that differ from defaults or are critical for Docker/Production

# Connection Settings
listen_addresses = '*'  # REQUIRED for Docker - Default: 'localhost'

# Memory Settings (tuned for production)
shared_buffers = 256MB              # Default: 128MB
effective_cache_size = 1GB          # Default: ~4GB (system dependent)
work_mem = 2621kB                   # Default: 4MB (lowered for high connection count)

# WAL Settings (optimized for write performance)
checkpoint_completion_target = 0.9  # Default: 0.5
min_wal_size = 1GB                  # Default: 80MB
max_wal_size = 4GB                  # Default: 1GB

# Query Optimizer (SSD-optimized)
random_page_cost = 1.1              # Default: 4.0 (set for SSD, use 4.0 for HDD)
effective_io_concurrency = 200      # Default: 1 (set for SSD/NVMe)

# Logging (enhanced for debugging)
log_line_prefix = '%t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '  # Default: '%m [%p]'
log_timezone = 'UTC'                # Best practice
log_min_duration_statement = 250ms  # Default: -1 (disabled) - logs slow queries

# Security
password_encryption = scram-sha-256  # Default in PG 14+ (explicit for clarity)
# ssl = on  # TODO: Enable with certificates in production
